@model SacramentMeetingPlanner.Models.Meeting

@{
    ViewData["Title"] = "Meeting Details";
}

<div class="bg-white shadow overflow-hidden sm:rounded-lg my-12 max-w-screen-md  mx-auto">
    <div class="px-4 py-5 sm:px-6 flex justify-between">
        <div>
            <h3 class="text-lg leading-6 font-medium text-gray-900">@ViewData["Title"]</h3>
            <p class="mt-1 max-w-2xl text-sm text-gray-500"> @Html.DisplayFor(model => model.MeetingDate) meeting
                details.
            </p>
        </div>
        <div>
            <div>
                <a class="btn btn-save" asp-action="Edit" asp-route-id="@Model.ID">Edit</a>
                <a class="btn btn-list" asp-action="Index">Back to List</a>
            </div>
        </div>
    </div>
    <div class="border-t border-gray-200">
        <dl>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500"> @Html.DisplayNameFor(model => model.Member)</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">@Html.DisplayFor(model =>
                    model.Member.FullName)</dd>
            </div>
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500"> @Html.DisplayNameFor(model => model.OpeningHymn)</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">@Html.DisplayFor(model =>
                    model.OpeningHymn)</dd>
            </div>
            <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500">Opening Prayer</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"> @Html.DisplayFor(model =>
                    model.Participants.ElementAt(0).Member.FullName)</dd>
            </div>
            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                <dt class="text-sm font-medium text-gray-500"> @Html.DisplayNameFor(model => model.SacramentHymn)</dt>
                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">@Html.DisplayFor(model =>
                    model.SacramentHymn)</dd>
            </div>
            @{
                int speakers = Model.Participants.Count - 2;
                if (speakers == 0)
                {
                    <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                        <dt class="text-sm font-medium text-gray-500">Testimony Meeting</dt>
                        <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">Open to the Congregation.</dd>
                    </div>
                }
                else
                {
                    int splitSpeakers = -1;
                    if (Model.IntermediateNumber != null)
                    {
                        splitSpeakers = speakers / 2;
                    }
                    for (int i = 0; i < speakers; i++)
                    {
                        <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                            <dt class="text-sm font-medium text-gray-500">Speaker</dt>
                            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2">@Html.DisplayFor(model =>
                    model.Participants.ElementAt(i + 2).Member.FullName)</dd>
                        </div>


                        <div class="bg-gray-50 px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                            <dt class="text-sm font-medium text-gray-500">@Html.DisplayNameFor(model =>
                    model.Participants.ElementAt(i + 2).Topic)</dt>
                            <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"> @Html.DisplayFor(model =>
                    model.Participants.ElementAt(i + 2).Topic)</dd>
                        </div>
                        if (i == splitSpeakers)
                        {
                            <div class="bg-white px-4 py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6">
                                <dt class="text-sm font-medium text-gray-500"> @Html.DisplayNameFor(model => model.IntermediateNumber)
                                </dt>
                                <dd class="mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2"> @Html.DisplayFor(model =>
                    model.IntermediateNumber)</dd>
                            </div>
                        }
                    }
                }
            }
        </dl>
    </div>
</div>
